<!DOCTYPE html>
<html>

<head>

<title> Music Web Application</title>

<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
<script src = "https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular-route.min.js"></script>

<link rel="stylesheet" href="style.css">

</head>

<body>

<div ng-app="myApp" ng-controller="MusicController"> 

    <ul>
      <li><a class="active" href="#index">Home</a></li>
      <li><a href="#login">Login</a></li>
      <li><a href="#contact">Contact</a></li>
      <li><a href="#about">About</a></li>
    </ul>
<br>

  <div class="header">
    <h1>Music List</h1>
  </div>
  <br>
<table>
  <tr>
    <th>Edit</th>
    <th>Artist</th>
  </tr>
  <tr ng-repeat="x in musics">
    <td>
    <!--<button a href= "#music"> &#9998; Edit </button>-->
    <p> <a href= "#music?{{x.id}}">Edit</a></p>
    <div ng-view></div>
    </td>
    <td>{{x.artist}}</td>
  </tr>
</table>
<br>
<div class="footer">
<p> Music Web Application</p>
</div>


<script type = "text/ng-template" id = "index.html">
  <h2> Music List </h2>
  {{message}}
</script>

<!--<script type = "text/ng-template" id = "music.html">
  <h2> Music Details </h2>
  {{message}}
</script>-->
</div>

<script>
var app = angular.module('myApp', ['ngRoute']);

app.factory('DataService', function () {
  var music = {};

  music.id = 1;

  return music;
});

app.config(['$routeProvider', function ($routeProvider) {
  $routeProvider.

  when('/music', {
    templateUrl: 'music.html',
    controller: 'MusicController'
  }).
  when('/index', {
    templateUrl: 'index.html',
    controller: 'IndexController'
  }).
  otherwise({
    redirectTo: '/music'
  });
}]);

app.controller('MusicController', function($scope, $http, $location, DataService) {
  $http.get("http://localhost:8080/api/users/1/musics")
  .then(function(response) {
    $scope.music = 21;
    $scope.DataService = DataService;
    $scope.musics = [];

    angular.forEach(response.data, function(item){ 
      $scope.musics.push(item);
    })
  });
});

app.controller('IndexController', function($scope, DataService) {
  $scope.DataService = DataService;
  $scope.message = "Index Controller Page";
});

</script>


</body>
</html>